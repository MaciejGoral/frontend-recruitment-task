const modal=document.querySelector(".modal"),btn=document.querySelector(".btnOpenPopup"),span=document.querySelector(".close"),popupText=document.querySelector("#popupText"),resetButton=document.querySelector(".btnReset");function hideTable(){const e=document.querySelector("#table");e.style.display="none"}async function getData(){const e=await fetch("https://jsonplaceholder.typicode.com/users");return await e.json()}function delay(t){return new Promise(e=>setTimeout(e,t))}async function addDataToTable(){document.querySelector("#loading").style.display="block",await delay(3e3),await getData().then(e=>{document.querySelector("#loading").style.display="none";const c=document.querySelector("#table");c.style.display="inline-block",1==c.rows.length&&e.forEach(e=>{var t=c.insertRow(-1),n=t.insertCell(0),o=t.insertCell(1),l=t.insertCell(2),a=t.insertCell(3),t=t.insertCell(4);n.innerHTML=e.name,o.innerHTML=e.email,l.innerHTML=e.address.city+" "+e.address.street+" "+e.address.suite,a.innerHTML=e.phone,t.innerHTML=e.company.name})})}btn.onclick=function(){modal.style.display="block";var e=localStorage.getItem("numberOfClicks");null==e?e=1:e++,localStorage.setItem("numberOfClicks",e),popupText.innerHTML="You have clicked <b>"+localStorage.getItem("numberOfClicks")+" times</b> to related button.",resetButton.style.display=e<5?"none":"block",addDataToTable()},resetButton.onclick=function(){localStorage.setItem("numberOfClicks",0),popupText.innerHTML="You have clicked <b>"+localStorage.getItem("numberOfClicks")+" times</b> to related button.",resetButton.style.display="none"},span.onclick=function(){modal.style.display="none",hideTable()},window.onclick=function(e){e.target==modal&&(modal.style.display="none",hideTable())};